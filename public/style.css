/* Professional animations and effects */
@keyframes blob {
    0% {
        transform: translate(0px, 0px) scale(1);
    }
    33% {
        transform: translate(30px, -50px) scale(1.1);
    }
    66% {
        transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
        transform: translate(0px, 0px) scale(1);
    }
}

@keyframes fade-in-down {
    0% {
        opacity: 0;
        transform: translateY(-20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-blob {
    animation: blob 7s infinite;
}

.animation-delay-2000 {
    animation-delay: 2s;
}

.animation-delay-4000 {
    animation-delay: 4s;
}

.animate-fade-in-down {
    animation: fade-in-down 1s ease-out;
}

/* Glassmorphism effects */
.backdrop-blur-lg {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
}

/* Enhanced shadow effects */
.shadow-3xl {
    box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25);
}

/* Professional input focus states */
input:focus {
    outline: none;
}

/* Smooth transitions for all interactive elements */
button, input, a {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Enhanced hover effects for buttons */
button:hover {
    transform: translateY(-2px);
}

button:active {
    transform: translateY(0);
}

/* Professional gradient text */
.bg-clip-text {
    -webkit-background-clip: text;
    background-clip: text;
}

/* Responsive improvements for professional design */
@media screen and (max-width: 768px) {
    .backdrop-blur-lg {
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
    }
    
    button:hover {
        transform: none; /* Disable hover transforms on mobile for better UX */
    }
}

body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    /* Use dynamic viewport height that adjusts to browser UI */
    min-height: 100dvh; /* Dynamic viewport height */
    min-height: 100vh; /* Fallback for older browsers */
    min-height: calc(var(--vh, 1vh) * 100); /* JS-calculated height fallback */
    background-color: #f0f0f0;
    margin: 0;
    overflow-x: hidden; /* Prevent horizontal scrolling */
    font-size: clamp(14px, 2.5vw, 20px); /* Responsive base font size */
}

/* Dynamic viewport height classes */
.min-h-screen-dynamic {
    min-height: 100dvh !important; /* Dynamic viewport height */
    min-height: 100vh !important; /* Fallback for older browsers */
    min-height: calc(var(--vh, 1vh) * 100) !important; /* JS-calculated height fallback */
}

/* Mobile viewport and layout fixes */
@media screen and (max-width: 768px) {
    .min-h-screen-dynamic {
        min-height: 100vh !important;
        height: auto !important; /* Allow natural height instead of forcing exact height */
        justify-content: flex-start !important;
        padding: 1rem !important; /* Simplified padding */
    }
    
    body {
        min-height: 100vh !important;
        height: auto !important; /* Allow natural height */
        position: relative !important;
        overflow-x: hidden;
        overflow-y: auto;
    }
    
    html {
        height: 100%;
        overflow-x: hidden;
    }
    
    /* Ensure proper box sizing */
    * {
        box-sizing: border-box;
    }
    
    /* Fix container positioning */
    #home-view {
        width: 100% !important;
        max-width: 100% !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        padding: 1rem !important;
        margin: 0 !important;
    }
}

/* Extra small screens (400px and below) */
@media screen and (max-width: 400px) {
    #home-view {
        padding: 0.5rem !important;
    }
    
    /* Override Tailwind max-width constraints for the main card */
    .bg-white.rounded-2xl.shadow-xl {
        max-width: none !important;
        width: calc(100vw - 1rem) !important;
        padding: 1rem !important;
        margin: 0.25rem auto !important;
        box-sizing: border-box !important;
    }
    
    /* Ensure buttons don't overflow */
    #create-lobby-btn, #join-lobby-btn {
        width: 100% !important;
        max-width: 100% !important;
        padding: 0.75rem 1rem !important;
        font-size: 1rem !important;
        margin: 0.25rem 0 !important;
        box-sizing: border-box !important;
    }
    
    #sign-in-button, #logout-button {
        padding: 0.5rem 1rem !important;
        font-size: 0.875rem !important;
        margin: 0.25rem 0 !important;
        max-width: calc(100vw - 1rem) !important;
        box-sizing: border-box !important;
    }
    
    /* Scale down input fields */
    #remote-player-name-input, #lobby-code-input {
        padding: 0.5rem !important;
        font-size: 1rem !important;
        margin: 0.25rem 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Scale down title */
    h1 {
        font-size: 2rem !important;
        margin-bottom: 1rem !important;
        padding: 0 0.5rem !important;
        text-align: center !important;
    }
    
    h2 {
        font-size: 1.25rem !important;
        padding: 0 0.5rem !important;
        text-align: center !important;
    }
    
    /* Ensure icons scale appropriately */
    svg {
        width: 1.25rem !important;
        height: 1.25rem !important;
    }
    
    /* Fix any flex gap issues */
    .space-x-1\.5 > * + *, .space-x-2 > * + * {
        margin-left: 0.5rem !important;
    }
    
    .space-y-3 > * + *, .space-y-4 > * + * {
        margin-top: 0.5rem !important;
    }
}

/* Small screens (401px to 600px) */
@media screen and (min-width: 401px) and (max-width: 600px) {
    /* Override Tailwind max-width constraints for better fit */
    .bg-white.rounded-2xl.shadow-xl {
        max-width: calc(100vw - 2rem) !important;
        width: 100% !important;
        margin: 1rem auto !important;
        box-sizing: border-box !important;
    }
    
    /* Ensure proper button sizing */
    #create-lobby-btn, #join-lobby-btn {
        font-size: clamp(1rem, 2.5vw, 1.5rem) !important;
        padding: clamp(0.75rem, 2vw, 1rem) !important;
    }
    
    #sign-in-button, #logout-button {
        font-size: clamp(0.875rem, 2vw, 1.125rem) !important;
        padding: clamp(0.5rem, 1.5vw, 0.75rem) clamp(1rem, 2.5vw, 1.5rem) !important;
    }
}

/* Responsive scaling for the main container */
#home-view {
    font-size: clamp(14px, 2.5vw, 20px);
    /* Simplified padding without safe area insets */
    padding: 1rem;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* Scale main title with viewport */
#home-view h1 {
    font-size: clamp(2rem, 8vw, 6rem);
    line-height: 1.1;
}

/* Scale buttons responsively */
#create-lobby-btn, #join-lobby-btn {
    font-size: clamp(1rem, 3vw, 2.5rem);
    padding: clamp(0.75rem, 2.5vw, 2rem) clamp(1rem, 3vw, 2.5rem);
}

#sign-in-button {
    font-size: clamp(0.875rem, 2.5vw, 1.25rem);
    padding: clamp(0.5rem, 1.5vw, 1rem) clamp(1rem, 3vw, 2.5rem);
}

#logout-button {
    font-size: clamp(0.75rem, 2vw, 1.125rem);
    padding: clamp(0.375rem, 1vw, 0.75rem) clamp(0.75rem, 2vw, 2rem);
}

/* Scale input fields */
#remote-player-name-input, #lobby-code-input {
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    padding: clamp(0.75rem, 2vw, 1.25rem);
}

/* Scale section headings */
h2 {
    font-size: clamp(1.25rem, 4vw, 2.5rem);
}

/* Scale icons with viewport */
svg {
    width: clamp(1rem, 3vw, 2.5rem);
    height: clamp(1rem, 3vw, 2.5rem);
}

/* Responsive spacing */
.space-responsive {
    gap: clamp(1rem, 3vw, 2rem);
}

/* Scale the main card container */
.main-card {
    width: clamp(280px, 90vw, 600px); /* Reduced min-width for better mobile fit */
    padding: clamp(1rem, 4vw, 3rem);
    margin: clamp(0.5rem, 2vw, 2rem); /* Reduced margin for better fit */
    box-sizing: border-box;
}

/* Responsive footer */
footer {
    font-size: clamp(0.75rem, 1.5vw, 1rem);
    margin-top: clamp(1.5rem, 5vw, 3rem);
}

/* User ID display scaling */
#user-id-display {
    font-size: clamp(0.75rem, 1.5vw, 1rem);
    padding: clamp(0.75rem, 2vw, 1rem);
    margin-top: clamp(1rem, 3vw, 2rem);
}

#user-id-value {
    font-size: clamp(0.875rem, 2vw, 1.125rem);
    padding: clamp(0.25rem, 1vw, 0.5rem) clamp(0.5rem, 2vw, 1rem);
}

.lobby-controls {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.lobby-controls input[type="text"] {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
}

.lobby-controls button {
    padding: 10px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
}

.lobby-controls button:hover {
    background-color: #0056b3;
}

/* Modal base styles - for content within modal containers */
.settings-modal-content,
.confirmation-modal-content, 
.commander-modal-content {
    position: relative; /* Relative positioning within flex container */
    margin: auto; /* Center within flex container */
    max-height: 90vh; /* Prevent modal from being too tall */
    max-height: 90dvh; /* Dynamic viewport height */
    overflow-y: auto; /* Allow scrolling if content is too long */
    z-index: 60; /* Ensure modal content is above backdrop */
    /* Remove any transform or fixed positioning - let flexbox handle centering */
}

/* Legacy modal-content class - kept for backward compatibility but cleaned up */
.modal-content {
    position: relative; /* Change from fixed to relative */
    margin: auto; /* Center within flex container */
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    max-width: 500px;
    max-height: 90vh;
    max-height: 90dvh;
    overflow-y: auto;
    z-index: 60;
}

/* Ensure modal containers are properly set up for centering */
.modal-container,
#settingsModal,
#commanderModal,
#confirmation-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 50 !important;
    padding: 1rem !important; /* Add padding for mobile safety */
}

/* When modals are shown (not hidden), display as flex */
.modal-container:not(.hidden),
#settingsModal:not(.hidden),
#commanderModal:not(.hidden),
#confirmation-modal:not(.hidden) {
    display: flex !important;
}

/* When modals are hidden, ensure they're not displayed */
.modal-container.hidden,
#settingsModal.hidden,
#commanderModal.hidden,
#confirmation-modal.hidden {
    display: none !important;
}

/* Responsive modal adjustments */
@media screen and (max-width: 768px) {
    .settings-modal-content,
    .confirmation-modal-content,
    .commander-modal-content,
    .modal-content {
        max-width: calc(100vw - 2rem) !important;
        max-height: calc(100vh - 2rem) !important;
        max-height: calc(100dvh - 2rem) !important;
        margin: 1rem !important;
    }
    
    /* Ensure modal containers have proper mobile padding */
    .modal-container,
    #settingsModal,
    #commanderModal,
    #confirmation-modal {
        padding: 0.5rem !important;
    }
}

/* Prevent body scroll when modal is open */
body.modal-open {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
}

/* Enhanced modal backdrop - ensures proper layering */
.modal-container:not(.hidden),
#settingsModal:not(.hidden),
#commanderModal:not(.hidden),
#confirmation-modal:not(.hidden) {
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
}

/* Smooth modal animations */
.settings-modal-content,
.confirmation-modal-content,
.commander-modal-content {
    animation: modalFadeIn 0.3s ease-out;
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(-10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}
/* Additional mobile-specific enhancements */
.mobile-device {
    /* Prevent zoom on input focus */
    -webkit-text-size-adjust: 100%;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.mobile-device input {
    /* Allow selection on inputs */
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}

.firebase-emulator-warning {
    display: none;
}

